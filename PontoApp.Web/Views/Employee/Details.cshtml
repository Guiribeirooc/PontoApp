@model PontoApp.Web.ViewModels.EmployeeDetailsViewModel
@using PontoApp.Domain.Enums
@{
    ViewData["Title"] = "Detalhes do(a) colaborador(a)";
    string Dash(string? s) => string.IsNullOrWhiteSpace(s) ? "-" : s!;
    string DateOrDash(DateOnly? d) => d.HasValue ? d.Value.ToString("dd/MM/yyyy") : "-";
    string MoneyOrDash(decimal? v) => v.HasValue ? v.Value.ToString("C2") : "R$0,00";

    string Escala()
    {
        var j = Model.Jornada switch
        {
            WorkScheduleKind.Integral => "{INTEGRAL}",
            WorkScheduleKind.Parcial => "{PARCIAL}",
            WorkScheduleKind.Noturna => "{NOTURNA}",
            WorkScheduleKind.DozePorTrintaSeis => "{12x36}",
            WorkScheduleKind.Remota => "{REMOTA}",
            WorkScheduleKind.Intermitente => "{INTERMITENTE}",
            WorkScheduleKind.Estagiario => "{ESTAGIÁRIO}",
            _ => "{ESCALA}"
        };

        var hh = (Model.ShiftStart.HasValue && Model.ShiftEnd.HasValue)
                  ? $"{Model.ShiftStart:HH\\:mm} - {Model.ShiftEnd:HH\\:mm}"
                  : "-";

        var banco = Model.BancoHorasHabilitado ? "Com banco de horas" : "Sem banco de horas";
        return $"{j} Seg.-Sex. {hh} {banco}";
    }
}

<style>
    .card-soft {
        border: 0;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }

    .section-title {
        font-size: 1rem;
        letter-spacing: .2px;
        color: #6b7280;
        margin-bottom: .5rem;
    }

    .kv {
        color: #6b7280;
        font-size: .9rem;
    }

        .kv .k {
            min-width: 220px;
            display: block;
        }

    .avatar {
        width: 56px;
        height: 56px;
        border-radius: 12px;
        object-fit: cover;
        background: #f0f0f0;
        box-shadow: 0 4px 12px rgba(0,0,0,.12);
    }

    .chip {
        background: #efe7f1;
        color: #6b2d5d;
        border-radius: 999px;
        padding: .25rem .6rem;
        font-size: .8rem;
    }
</style>

<div class="d-flex align-items-start gap-3 mb-4">
    <img class="avatar" src="@(Model.PhotoUrl ?? "/img/icon-192.png")" alt="Foto" />
    <div class="flex-grow-1">
        <div class="fw-semibold" style="font-size:1.1rem;">Detalhes do(a) funcionário(a)</div>
        <div class="h4 m-0">@Model.Nome</div>
    </div>
    <div class="d-none d-md-flex flex-column align-items-end gap-1">
        <div class="kv"><span class="text-muted">CARGO</span><br /><span class="fw-medium">@Dash(Model.Cargo)</span></div>
        <div class="kv"><span class="text-muted">ESCALA DE TRABALHO</span><br /><span class="fw-medium">@Escala()</span></div>
    </div>
</div>

<div class="alert alert-light border-0" style="background:#efe8f4">
    Envie para esse funcionário instruções para uso do app.
    <a href="#" class="alert-link">Enviar instruções</a>
</div>

<div class="mb-4">
    <div class="section-title">Informações pessoais</div>
    <div class="card card-soft">
        <div class="card-body">
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="kv"><span class="k">Nome Completo</span><div class="fw-medium">@Model.Nome</div></div>
                    <div class="kv mt-3"><span class="k">Data de Nascimento</span><div class="fw-medium">@DateOrDash(Model.BirthDate)</div></div>
                    <div class="kv mt-3"><span class="k">Telefone celular</span><div class="fw-medium">@Dash(Model.Phone)</div></div>
                    <div class="kv mt-3"><span class="k">Fuso horário</span><div class="fw-medium">@Model.TimeZoneDisplay</div></div>
                </div>
                <div class="col-md-6">
                    <div class="kv"><span class="k">CNPJ/CPF</span><div class="fw-medium">@Dash(Model.Cpf)</div></div>
                    <div class="kv mt-3"><span class="k">E-mail</span><div class="fw-medium">@Dash(Model.Email)</div></div>
                    <div class="kv mt-3"><span class="k">Número do NIS/PIS</span><div class="fw-medium">@Dash(Model.NisPis)</div></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mb-4">
    <div class="section-title">Alocação</div>
    <div class="card card-soft">
        <div class="card-body">
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="kv"><span class="k">Cidade</span><div class="fw-medium">@Dash(Model.Cidade)</div></div>
                </div>
                <div class="col-md-6">
                    <div class="kv"><span class="k">Estado</span><div class="fw-medium">@Dash(Model.Estado)</div></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mb-4">
    <div class="section-title">Dados contratuais</div>
    <div class="card card-soft">
        <div class="card-body">
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="kv"><span class="k">Departamento</span><div class="fw-medium">@Dash(Model.Departamento)</div></div>
                    <div class="kv mt-3"><span class="k">Código de matrícula</span><div class="fw-medium">@Dash(Model.Matricula)</div></div>
                </div>
                <div class="col-md-6">
                    <div class="kv"><span class="k">Cargo</span><div class="fw-medium">@Dash(Model.Cargo)</div></div>
                    <div class="kv mt-3"><span class="k">Valor hora</span><div class="fw-medium">@MoneyOrDash(Model.ValorHora)</div></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mb-4">
    <div class="section-title">Informações para cálculo de ponto</div>
    <div class="card card-soft">
        <div class="card-body">
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="kv"><span class="k">Data de admissão</span><div class="fw-medium">@DateOrDash(Model.Admissao)</div></div>
                    <div class="kv mt-3">
                        <span class="k">Definição de banco</span>
                        <div class="fw-medium">
                            <span class="chip">@((Model.BancoHorasHabilitado ? "Com banco de horas" : "Sem banco de horas"))</span>
                        </div>
                    </div>
                    <div class="kv mt-3"><span class="k">Fim de registro de ponto</span><div class="fw-medium">@DateOrDash(Model.FimRegistro)</div></div>
                    <div class="kv mt-3"><span class="k">Unidade(s) de alocação</span><div class="fw-medium">@Dash(Model.Unidade)</div></div>
                </div>
                <div class="col-md-6">
                    <div class="kv"><span class="k">Escala de trabalho</span><div class="fw-medium">@Escala()</div></div>
                    <div class="kv mt-3"><span class="k">Início de registro de ponto</span><div class="fw-medium">@DateOrDash(Model.InicioRegistro)</div></div>
                    <div class="kv mt-3"><span class="k">Início do período aquisitivo de férias</span><div class="fw-medium">@DateOrDash(Model.InicioAquisitivoFerias)</div></div>
                    <div class="kv mt-3"><span class="k">Gestor</span><div class="fw-medium">@Dash(Model.Gestor)</div></div>
                    <div class="kv mt-3"><span class="k">Empregador</span><div class="fw-medium">@Dash(Model.Empregador)</div></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="d-flex gap-2">
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">Editar</a>
    <a asp-action="Index" class="btn btn-light">Voltar</a>
</div>
